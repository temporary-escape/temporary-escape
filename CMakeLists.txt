cmake_minimum_required(VERSION 3.10)
set(CMAKE_MODULE_PATH
        "${CMAKE_CURRENT_LIST_DIR}/modules"
        )

project(TemporaryEscape)

option(TEMPORARY_ESCAPE_BUILD_TESTS "Build with tests" OFF)

if (NOT MSVC)
    find_package(ZLIB REQUIRED)
    find_package(LibLZMA REQUIRED)
    find_package(unofficial-libuuid CONFIG REQUIRED)
else ()
    add_compile_options(/EHsc)
    add_compile_options(/wd4251)
endif ()

find_package(glfw3 CONFIG REQUIRED)
find_package(glm CONFIG REQUIRED)
find_package(glad CONFIG REQUIRED)
find_package(fmt REQUIRED)
find_package(Xml2 REQUIRED)
find_package(NanoVG REQUIRED)
find_package(Png REQUIRED)
find_package(Cgltf REQUIRED)
find_package(msgpack CONFIG REQUIRED)
find_package(asio CONFIG REQUIRED)
find_package(Nuklear REQUIRED)
find_package(Stb REQUIRED)
find_package(Catch2 CONFIG REQUIRED)
find_package(spdlog CONFIG REQUIRED)
find_package(cxxopts CONFIG REQUIRED)
find_package(freetype CONFIG REQUIRED)
find_package(Wren REQUIRED)
find_package(WrenBind17 REQUIRED)
find_package(RocksDB CONFIG REQUIRED)
find_package(OpenSSL REQUIRED)

add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/src)

if (TEMPORARY_ESCAPE_BUILD_TESTS)
    enable_testing()
    add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/test)
endif ()
